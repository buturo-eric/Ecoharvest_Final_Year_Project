<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="img/apple-icon.png">
    <link rel="icon" type="image/png" href="img/favicon.png">
    <title>
        ECOHARVEST
    </title>
    <!-- Fonts and icons -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <!-- Nucleo Icons -->
    <link href="css/nucleo-icons.css" rel="stylesheet" />
    <link href="css/nucleo-svg.css" rel="stylesheet" />
    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <link href="css/nucleo-svg.css" rel="stylesheet" />
    <!-- CSS Files -->
    <link id="pagestyle" href="css/soft-ui-dashboard.css?v=1.0.7" rel="stylesheet" />
    <!-- FullCalendar CSS -->
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css' rel='stylesheet' />
    <style>
        :root {
          --bs-primary: #3E8914; /* Primary color */
          --bs-info: #3E8914; /* Adjusting info to match theme */
          --bs-success: #3E8914; /* Ensuring success is also in theme */
          --bs-gradient-primary: linear-gradient(195deg, #3E8914, #295612); /* Gradient adjustments */
        }

        .bg-gradient-primary {
          background: var(--bs-gradient-primary);
        }

        .text-primary {
          color: #3E8914 !important; /* Overriding primary text color */
        }

        .btn-primary {
          background-color: #3E8914;
          border-color: #295612; /* Darker shade for border if needed */
        }

        .navbar {
          background-color: #2f7309 !important;
        }

        .navbar-vertical .navbar-nav>.nav-item .nav-link.active {
          color: #000000;
          background-color: #b4d612;
        }

        .navbar-vertical .navbar-nav .nav-link {
          padding-left: 1rem;
          padding-right: 1rem;
          font-weight: 500;
          color: #ffffff;
        }

        .card {
          border-left: 5px solid #3E8914; /* Just an example to show border-color usage */
        }
        .row .col-md-4 {
            padding-bottom: 15px;
        }
            .text-body {
  color: #f1f1f1 !important;
}
    </style>
    <style>
        .container {
          max-width: 1200px;
          margin: 0 auto;
        }

        .row {
          display: flex;
          flex-wrap: wrap;
        }

        .col {
          flex: 1 1 30%;
          margin: 10px;
        }

        .card {
          border: 1px solid #ddd;
          border-radius: 8px;
          overflow: hidden;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          transition: transform 0.2s;
        }

        .card:hover {
          transform: scale(1.05);
        }

        .card img {
          height: 200px;
          object-fit: cover;
        }

        .card-body {
          padding: 15px;
        }

        .card-title {
          font-size: 1.25rem;
          margin-bottom: 10px;
        }

        .card-footer {
          padding: 10px 15px;
          background-color: #f8f9fa;
          border-top: 1px solid #ddd;
        }

        .col-6 {
          margin-bottom: 35px;
        }
        #calendar {
        max-width: 100%; /* Ensures the calendar does not exceed the width of its container */
        height: auto; /* Ensures the height is automatic and scales with content */
      }
      .crd_design{
        width: 720px;
        margin-left: 100px
      }
      .result-card {
            display: none;
            margin-top: 20px;
        }
        .result-card .card-body {
            padding: 15px;
        }
    </style>
</head>
<style>
    .icon.icon-shape.icon-sm {
    width: 30px; /* Adjust as needed */
    height: 30px; /* Adjust as needed */
  }

  .icon.icon-shape.icon-sm i {
    font-size: 1rem; /* Adjust as needed */
  }

  .nav-link .icon {
    margin-right: 10px; /* Adjust as needed */
  }
</style>
<body class="g-sidenav-show bg-gray-100">
<aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 " id="sidenav-main">
    <div class="sidenav-header">
        <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
        <a class="navbar-brand m-0" th:href="@{/}" target="_blank">
            <img src="img/logo-ct-dark.png" class="navbar-brand-img h-100" alt="main_logo">
            <span class="ms-1 font-weight-bold">ECOHARVEST</span>
        </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse w-auto " id="sidenav-collapse-main">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" th:href="@{/userDashboard}">
                    <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="ni ni-tv-2 text-sm opacity-10" aria-hidden="true" style="color: #494962;"></i>
                    </div>
                    <span class="nav-link-text ms-1">Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" th:href="@{/blogs}">
                    <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="ni ni-collection text-sm opacity-10" aria-hidden="true" style="color: #494962;"></i>
                    </div>
                    <span class="nav-link-text ms-1">Farming Guidelines</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " th:href="@{/UserCompliances}">
                    <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="ni ni-check-bold text-sm opacity-10" style="color: #494962;" aria-hidden="true"></i>
                    </div>
                    <span class="nav-link-text ms-1">Compliances</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" th:href="@{/communityEducation}">
                    <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="ni ni-books text-sm opacity-10" aria-hidden="true" style="color: #494962;"></i>
                    </div>
                    <span class="nav-link-text ms-1">Community Education</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " th:href="@{/messages}">
                    <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="ni ni-email-83 text-sm opacity-10" style="color: #494962;" aria-hidden="true"></i>
                    </div>
                    <span class="nav-link-text ms-1">Messages</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link " th:href="@{/calendar}">
                    <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="ni ni-calendar-grid-58 text-sm opacity-10" style="color: #494962;" aria-hidden="true"></i>
                    </div>
                    <span class="nav-link-text ms-1">Calendar</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" th:href="@{/aiAssistance}">
                    <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="ni ni-support-16 text-sm opacity-10" style="color: #494962;" aria-hidden="true"></i>
                    </div>
                    <span class="nav-link-text ms-1">AI Assistance</span>
                </a>
            </li>
        </ul>

    </div>
</aside>
<main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl position-sticky blur shadow-blur mt-4 left-auto z-index-sticky" id="navbarBlur" navbar-scroll="true">
        <div class="container-fluid py-1 px-3">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
                    <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="javascript:;">Pages</a></li>
                    <li class="breadcrumb-item text-sm text-dark active" aria-current="page">User Dashboard</li>
                    <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Calendar</li>
                </ol>
                <h6 class="font-weight-bolder mb-0" th:text="${userName}">User Dashboard</h6>
            </nav>
            <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
                <div class="ms-md-auto pe-md-3 d-flex align-items-center">
                    <div class="input-group">
                        <span class="input-group-text text-body"><i class="fas fa-search" aria-hidden="true"></i></span>
                        <input type="text" class="form-control" placeholder="Type here...">
                    </div>
                </div>
                <ul class="navbar-nav justify-content-end">
                    <li class="nav-item d-flex align-items-center">
                        <a href="/logout" class="nav-link text-body font-weight-bold px-0">
                            <i class="fa fa-sign-out me-sm-1"></i>
                            <span class="d-sm-inline d-none">Sign Out</span>
                        </a>
                    </li>
                    <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
                        <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
                            <div class="sidenav-toggler-inner">
                                <i class="sidenav-toggler-line"></i>
                                <i class="sidenav-toggler-line"></i>
                                <i class="sidenav-toggler-line"></i>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item px-3 d-flex align-items-center">
                        <a href="javascript:;" class="nav-link text-body p-0">
                            <i class="fa fa-cog fixed-plugin-button-nav cursor-pointer"></i>
                        </a>
                    </li>
                    <li class="nav-item dropdown pe-2 d-flex align-items-center">
                        <a href="javascript:;" class="nav-link text-body p-0" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fa fa-bell cursor-pointer"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end px-2 py-3 me-sm-n4" aria-labelledby="dropdownMenuButton">
                            <li class="mb-2">
                                <a class="dropdown-item border-radius-md" href="/messages">
                                    <div class="d-flex py-1">
                                        <div class="avatar avatar-sm bg-gradient-dark me-3 my-auto">
                                            <i class="fas fa-envelope text-white"></i>
                                        </div>
                                        <div class="d-flex flex-column justify-content-center">
                                            <h6 class="text-sm font-weight-normal mb-1">
                                                <span class="font-weight-bold">New message</span> from ECOHARVEST Support
                                            </h6>
                                            <p class="text-xs text-secondary mb-0">
                                                <i class="fa fa-clock me-1"></i>
                                                56 minutes ago
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="mb-2">
                                <a class="dropdown-item border-radius-md" href="/communityEducation">
                                    <div class="d-flex py-1">
                                        <div class="my-auto">
                                            <i class="ni ni-books avatar avatar-sm bg-gradient-dark me-3"></i>
                                        </div>
                                        <div class="d-flex flex-column justify-content-center">
                                            <h6 class="text-sm font-weight-normal mb-1">
                                                <span class="font-weight-bold">New training program added</span>
                                            </h6>
                                            <p class="text-xs text-secondary mb-0">
                                                <i class="fa fa-clock me-1"></i>
                                                4 hours ago
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="mb-2">
                                <a class="dropdown-item border-radius-md" href="/blogs">
                                    <div class="d-flex py-1">
                                        <div class="avatar avatar-sm bg-gradient-dark me-3 my-auto">
                                            <i class="fas fa-seedling text-white"></i>
                                        </div>
                                        <div class="d-flex flex-column justify-content-center">
                                            <h6 class="text-sm font-weight-normal mb-1">
                                                New Farming Guidelines added
                                            </h6>
                                            <p class="text-xs text-secondary mb-0">
                                                <i class="fa fa-clock me-1"></i>
                                                1 day ago
                                            </p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->

    <div class="container-fluid py-4">
        <div class="card">
            <div class="card-body">
                <h4>Crop Yield Prediction</h4>
                <form id="yieldForm">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="rainfall" class="form-label">RainFall (mm)</label>
                            <input type="number" class="form-control" id="rain_fall" name="RainFall" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="fertilizer" class="form-label">Fertilizer</label>
                            <input type="number" class="form-control" id="fertilizer" name="fertilizer" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="temperature" class="form-label">Temperature (C)</label>
                            <input type="number" class="form-control" id="temperature" name="temperature" step="0.0000001" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="nitrogen" class="form-label">Nitrogen (N)</label>
                            <input type="number" class="form-control" id="nitrogen" name="nitrogen" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="phosphorus" class="form-label">Phosphorus (P)</label>
                            <input type="number" class="form-control" id="phosphorus" name="phosphorus" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="potassium" class="form-label">Potassium (K)</label>
                            <input type="number" class="form-control" id="potassium" name="potassium" step="0.0000001" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Predict Yield</button>
                </form>
                <div class="card result-card" id="yieldResultCard">
                    <div class="card-body">
                        <h5 class="card-title">Yield Prediction Result Per Acre</h5>
                        <p class="card-text" id="yieldResult"></p>
                        <p class="card-text">This prediction provides an estimate of the crop yield based on the given input parameters. Ensure that the input values are accurate for the most reliable results.</p>
                        <h6 class="card-title">Kinyarwanda</h6>
                        <p class="card-text">Ubuhanuzi butanga ikigereranyo cyumusaruro wibihingwa ukurikije ibipimo byatanzwe. Menya neza ko ibyinjijwe bifite agaciro kubisubizo byizewe.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="card mt-4">
            <div class="card-body">
                <h4>Crop Recommendation</h4>
                <form id="recommendForm">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="Nitrogen" class="form-label">Nitrogen (N)</label>
                            <input type="number" class="form-control" id="Nitrogen" name="n" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="Phosphorus" class="form-label">Phosphorus (P)</label>
                            <input type="number" class="form-control" id="phosphorus" name="p" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="Potassium" class="form-label">Potassium (K)</label>
                            <input type="number" class="form-control" id="potassium" name="k" step="0.0000001" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="Temperature" class="form-label">Temperature (C)</label>
                            <input type="number" class="form-control" id="temperature" name="temperature" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="Humidity" class="form-label">Humidity</label>
                            <input type="number" class="form-control" id="Humidity" name="humidity" step="0.0000001" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="pH" class="form-label">pH</label>
                            <input type="number" class="form-control" id="pH" name="ph" step="0.0000001" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="Rainfall" class="form-label">RainFall (mm)</label>
                            <input type="number" class="form-control" id="Rainfall" name="rainfall" step="0.0000001" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Recommend Crop</button>
                </form>
                <div class="card result-card" id="recommendResultCard" style="display: none;">
                    <div class="card-body">
                        <h5 class="card-title">Crop Recommendation Result</h5>
                        <p class="card-text" id="recommendResult"></p>
                        <img id="recommendCropImage" src="" alt="Recommended Crop Image" style="max-width: 100%; display: none;">
                        <h6 class="card-title">English</h6>
                        <p class="card-text">This recommendation suggests the most suitable crop based on the provided environmental conditions and soil properties. Ensure to use precise input values for the best recommendation.</p>
                        <h6 class="card-title">Kinyarwanda</h6>
                        <p class="card-text">Iki cyifuzo cyerekana igihingwa kibereye hashingiwe ku bidukikije byatanzwe hamwe nubutaka bwubutaka. Wemeze gukoresha indangagaciro zuzuye zibyifuzo byiza.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Core JS Files -->
<script src="js/core/popper.min.js"></script>
<script src="js/core/bootstrap.min.js"></script>
<script src="js/plugins/perfect-scrollbar.min.js"></script>
<script src="js/plugins/smooth-scrollbar.min.js"></script>
<script src="js/plugins/chartjs.min.js"></script>
<!-- FullCalendar JS -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>
<!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
<script src="js/soft-ui-dashboard.min.js?v=1.0.7"></script>
<script>
document.getElementById('yieldForm').addEventListener('submit', function(event) {
    event.preventDefault();
    var formData = new FormData(event.target);
    var jsonData = {
        rain_fall: formData.get('rain_fall'),
        fertilizer: formData.get('fertilizer'),
        temperature: formData.get('temperature'),
        nitrogen: formData.get('nitrogen'),
        phosphorus: formData.get('phosphorus'),
        potassium: formData.get('potassium')
    };
    fetch('/api/predictYield', {
        method: 'POST',
        body: JSON.stringify(jsonData),
        headers: {
            'Content-Type': 'application/json'
        }
    }).then(response => response.json())
      .then(data => {
          document.getElementById('yieldResult').innerText = 'Predicted Yield Per Acre: ' + data;
          document.getElementById('yieldResultCard').style.display = 'block';
      });
});

document.getElementById('recommendForm').addEventListener('submit', function(event) {
    event.preventDefault();
    var formData = new FormData(event.target);
    var jsonData = {
        n: formData.get('n'),
        p: formData.get('p'),
        k: formData.get('k'),
        temperature: formData.get('temperature'),
        humidity: formData.get('humidity'),
        ph: formData.get('ph'),
        rainfall: formData.get('rainfall')
    };
    fetch('/api/recommendCrop', {
        method: 'POST',
        body: JSON.stringify(jsonData),
        headers: {
            'Content-Type': 'application/json'
        }
    }).then(response => response.json())
      .then(data => {
          document.getElementById('recommendResult').innerText = 'Recommended Crop: ' + data;
          var cropImage = document.getElementById('recommendCropImage');
          cropImage.src = 'img/' + data + '.png'; // Assuming images are .jpg format
          cropImage.style.display = 'block';
          document.getElementById('recommendResultCard').style.display = 'block';
      });
});
</script>

</body>
</html>
